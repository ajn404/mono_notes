import{s as M}from"./transform.be1fedcc.js";import{r as f}from"./index.499fac84.js";import{j as A}from"./jsx-runtime.b792ae09.js";import"./_commonjsHelpers.de833af9.js";const E=()=>{const m=f.useRef(null);function p({teeth:n,radius:h,annulus:l,toothRadius:i,holeRadius:c}){const o=n;let t=Math.abs(h),a=t-i,s=t+i,r=c;l&&(r=a,a=s,s=r,r=t+i*3);const d=Math.PI/o;let e=-Math.PI/2+(l?Math.PI/o:0);const u=["M",a*Math.cos(e),",",a*Math.sin(e)];let x=-1;for(;++x<o;)u.push("A",a,",",a," 0 0,1 ",a*Math.cos(e+=d),",",a*Math.sin(e),"L",t*Math.cos(e),",",t*Math.sin(e),"L",s*Math.cos(e+=d/3),",",s*Math.sin(e),"A",s,",",s," 0 0,1 ",s*Math.cos(e+=d/3),",",s*Math.sin(e),"L",t*Math.cos(e+=d/3),",",t*Math.sin(e),"L",a*Math.cos(e),",",a*Math.sin(e));return u.push("M0,",-r,"A",r,",",r," 0 0,0 0,",r,"A",r,",",r," 0 0,0 0,",-r,"Z"),u.join("")}const g=()=>{const n=Math.sin(2*Math.PI/3),h=Math.cos(2*Math.PI/3),i=M(m.current).attr("width",640).attr("viewBox",[-.53,-.53,1.06,1.06]).attr("stroke","black").attr("stroke-width",1/640).attr("style","width:100vw;max-width: 100%; height: calc( 100vh - 100px);"),c=i.append("g"),o=c.selectAll().data([{fill:"#c6dbef",teeth:80,radius:-.5,origin:[0,0],annulus:!0},{fill:"#6baed6",teeth:16,radius:.1,origin:[0,0]},{fill:"#9ecae1",teeth:32,radius:-.2,origin:[0,-.3]},{fill:"#9ecae1",teeth:32,radius:-.2,origin:[-.3*n,-.3*h]},{fill:"#9ecae1",teeth:32,radius:-.2,origin:[.3*n,-.3*h]}]).join("path").attr("fill",t=>t.fill).attr("d",t=>p({...t,toothRadius:.008,holeRadius:.02}));Object.assign(i.node(),{update({angle:t,frameAngle:a}){o.attr("transform",s=>`translate(${s.origin}) rotate(${t/s.radius%360})`),c.attr("transform",`rotate(${a%360})`)}})};return f.useEffect(()=>{g();let n=0;return(()=>{let i=0,c=0;const o=function(t){M(m.current).node().update({angle:i,frameAngle:c}),i+=.08,c+=.08/360,n=requestAnimationFrame(o)};n=requestAnimationFrame(o)})(),()=>{cancelAnimationFrame(n)}}),A.jsx("svg",{ref:m})};export{E as default};
