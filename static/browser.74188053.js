import{a as getAugmentedNamespace,c as commonjsGlobal,g as getDefaultExportFromCjs}from"./_commonjsHelpers.de833af9.js";import{b as buffer,i as ieee754}from"./index.71abee58.js";function _mergeNamespaces(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(i,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var browser$3={exports:{}},lib$2={},readableBrowser={exports:{}},events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(t){return t!==t};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once$2;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var s=t==="error",l=this._events;if(l!==void 0)s=s&&l.error===void 0;else if(!s)return!1;if(s){var d;if(r.length>0&&(d=r[0]),d instanceof Error)throw d;var m=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m}var f=l[t];if(f===void 0)return!1;if(typeof f=="function")ReflectApply(f,this,r);else for(var o=f.length,c=arrayClone(f,o),i=0;i<o;++i)ReflectApply(c[i],this,r);return!0};function _addListener(e,t,r,i){var s,l,d;if(checkListener(r),l=e._events,l===void 0?(l=e._events=Object.create(null),e._eventsCount=0):(l.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),l=e._events),d=l[t]),d===void 0)d=l[t]=r,++e._eventsCount;else if(typeof d=="function"?d=l[t]=i?[r,d]:[d,r]:i?d.unshift(r):d.push(r),s=_getMaxListeners(e),s>0&&d.length>s&&!d.warned){d.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=e,m.type=t,m.count=d.length,ProcessEmitWarning(m)}return e}EventEmitter.prototype.addListener=function(t,r){return _addListener(this,t,r,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,r){return _addListener(this,t,r,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=onceWrapper.bind(i);return s.listener=r,i.wrapFn=s,s}EventEmitter.prototype.once=function(t,r){return checkListener(r),this.on(t,_onceWrap(this,t,r)),this};EventEmitter.prototype.prependOnceListener=function(t,r){return checkListener(r),this.prependListener(t,_onceWrap(this,t,r)),this};EventEmitter.prototype.removeListener=function(t,r){var i,s,l,d,m;if(checkListener(r),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(l=-1,d=i.length-1;d>=0;d--)if(i[d]===r||i[d].listener===r){m=i[d].listener,l=d;break}if(l<0)return this;l===0?i.shift():spliceOne(i,l),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,m||r)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(t){var r,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var l=Object.keys(i),d;for(s=0;s<l.length;++s)d=l[s],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function _listeners(e,t,r){var i=e._events;if(i===void 0)return[];var s=i[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?unwrapListeners(s):arrayClone(s,s.length)}EventEmitter.prototype.listeners=function(t){return _listeners(this,t,!0)};EventEmitter.prototype.rawListeners=function(t){return _listeners(this,t,!1)};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function once$2(e,t){return new Promise(function(r,i){function s(d){e.removeListener(t,l),i(d)}function l(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,l,{once:!0}),t!=="error"&&addErrorHandlerIfEventEmitter(e,s,{once:!0})})}function addErrorHandlerIfEventEmitter(e,t,r){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",t,r)}function eventTargetAgnosticAddListener(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(l){i.once&&e.removeEventListener(t,s),r(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eventsExports=events.exports,streamBrowser=eventsExports.EventEmitter;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function e(T,B){var w=Object.keys(T);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(T);B&&(u=u.filter(function(g){return Object.getOwnPropertyDescriptor(T,g).enumerable})),w.push.apply(w,u)}return w}function t(T){for(var B=1;B<arguments.length;B++){var w=arguments[B]!=null?arguments[B]:{};B%2?e(Object(w),!0).forEach(function(u){r(T,u,w[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(w)):e(Object(w)).forEach(function(u){Object.defineProperty(T,u,Object.getOwnPropertyDescriptor(w,u))})}return T}function r(T,B,w){return B=d(B),B in T?Object.defineProperty(T,B,{value:w,enumerable:!0,configurable:!0,writable:!0}):T[B]=w,T}function i(T,B){if(!(T instanceof B))throw new TypeError("Cannot call a class as a function")}function s(T,B){for(var w=0;w<B.length;w++){var u=B[w];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(T,d(u.key),u)}}function l(T,B,w){return B&&s(T.prototype,B),w&&s(T,w),Object.defineProperty(T,"prototype",{writable:!1}),T}function d(T){var B=m(T,"string");return typeof B=="symbol"?B:String(B)}function m(T,B){if(typeof T!="object"||T===null)return T;var w=T[Symbol.toPrimitive];if(w!==void 0){var u=w.call(T,B||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(T)}var f=buffer,o=f.Buffer,c=require$$3,v=c.inspect,A=v&&v.custom||"inspect";function k(T,B,w){o.prototype.copy.call(T,B,w)}return buffer_list=function(){function T(){i(this,T),this.head=null,this.tail=null,this.length=0}return l(T,[{key:"push",value:function(w){var u={data:w,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(w){var u={data:w,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var u=this.head,g=""+u.data;u=u.next;)g+=w+u.data;return g}},{key:"concat",value:function(w){if(this.length===0)return o.alloc(0);for(var u=o.allocUnsafe(w>>>0),g=this.head,b=0;g;)k(g.data,u,b),b+=g.data.length,g=g.next;return u}},{key:"consume",value:function(w,u){var g;return w<this.head.data.length?(g=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?g=this.shift():g=u?this._getString(w):this._getBuffer(w),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var u=this.head,g=1,b=u.data;for(w-=b.length;u=u.next;){var y=u.data,S=w>y.length?y.length:w;if(S===y.length?b+=y:b+=y.slice(0,w),w-=S,w===0){S===y.length?(++g,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=y.slice(S));break}++g}return this.length-=g,b}},{key:"_getBuffer",value:function(w){var u=o.allocUnsafe(w),g=this.head,b=1;for(g.data.copy(u),w-=g.data.length;g=g.next;){var y=g.data,S=w>y.length?y.length:w;if(y.copy(u,u.length-w,0,S),w-=S,w===0){S===y.length?(++b,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=y.slice(S));break}++b}return this.length-=b,u}},{key:A,value:function(w,u){return v(this,t(t({},u),{},{depth:0,customInspect:!1}))}}]),T}(),buffer_list}function destroy(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,e)):process.nextTick(emitErrorNT,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(l){!t&&l?r._writableState?r._writableState.errorEmitted?process.nextTick(emitCloseNT,r):(r._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,r,l)):process.nextTick(emitErrorAndCloseNT,r,l):t?(process.nextTick(emitCloseNT,r),t(l)):process.nextTick(emitCloseNT,r)}),this)}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var codes={};function createErrorType(e,t,r){r||(r=Error);function i(l,d,m){return typeof t=="string"?t:t(l,d,m)}var s=function(l){_inheritsLoose(d,l);function d(m,f,o){return l.call(this,i(m,f,o))||this}return d}(r);s.prototype.name=r.name,s.prototype.code=e,codes[e]=s}function oneOf(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(e,t,r){var i;typeof t=="string"&&startsWith(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var s;if(endsWith(e," argument"))s="The ".concat(e," ").concat(i," ").concat(oneOf(t,"type"));else{var l=includes(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(l," ").concat(i," ").concat(oneOf(t,"type"))}return s+=". Received type ".concat(typeof r),s},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function getHighWaterMark(e,t,r,i){var s=highWaterMarkFrom(t,i,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var l=i?r:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(l,s)}return Math.floor(s)}return e.objectMode?16:16*1024}var state={getHighWaterMark},inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}};var inherits_browserExports=inherits_browser.exports,browser$2=deprecate;function deprecate(e,t){if(config("noDeprecation"))return e;var r=!1;function i(){if(!r){if(config("throwDeprecation"))throw new Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return i}function config(e){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var t=commonjsGlobal.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=D;function e(h){var p=this;this.next=null,this.entry=null,this.finish=function(){ae(p,h)}}var t;D.WritableState=M;var r={deprecate:browser$2},i=streamBrowser,s=buffer.Buffer,l=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(h){return s.from(h)}function m(h){return s.isBuffer(h)||h instanceof l}var f=destroy_1,o=state,c=o.getHighWaterMark,v=errorsBrowser.codes,A=v.ERR_INVALID_ARG_TYPE,k=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_MULTIPLE_CALLBACK,B=v.ERR_STREAM_CANNOT_PIPE,w=v.ERR_STREAM_DESTROYED,u=v.ERR_STREAM_NULL_VALUES,g=v.ERR_STREAM_WRITE_AFTER_END,b=v.ERR_UNKNOWN_ENCODING,y=f.errorOrDestroy;inherits_browserExports(D,i);function S(){}function M(h,p,_){t=t||require_stream_duplex(),h=h||{},typeof _!="boolean"&&(_=p instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=c(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=h.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(F){re(p,F)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}M.prototype.getBuffer=function(){for(var p=this.bufferedRequest,_=[];p;)_.push(p),p=p.next;return _},function(){try{Object.defineProperty(M.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(p){return P.call(this,p)?!0:this!==D?!1:p&&p._writableState instanceof M}})):P=function(p){return p instanceof this};function D(h){t=t||require_stream_duplex();var p=this instanceof t;if(!p&&!P.call(D,this))return new D(h);this._writableState=new M(h,this,p),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),i.call(this)}D.prototype.pipe=function(){y(this,new B)};function O(h,p){var _=new g;y(h,_),process.nextTick(p,_)}function j(h,p,_,L){var F;return _===null?F=new u:typeof _!="string"&&!p.objectMode&&(F=new A("chunk",["string","Buffer"],_)),F?(y(h,F),process.nextTick(L,F),!1):!0}D.prototype.write=function(h,p,_){var L=this._writableState,F=!1,n=!L.objectMode&&m(h);return n&&!s.isBuffer(h)&&(h=d(h)),typeof p=="function"&&(_=p,p=null),n?p="buffer":p||(p=L.defaultEncoding),typeof _!="function"&&(_=S),L.ending?O(this,_):(n||j(this,L,h,_))&&(L.pendingcb++,F=ee(this,L,n,h,p,_)),F},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&W(this,h))},D.prototype.setDefaultEncoding=function(p){if(typeof p=="string"&&(p=p.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((p+"").toLowerCase())>-1))throw new b(p);return this._writableState.defaultEncoding=p,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function V(h,p,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof p=="string"&&(p=s.from(p,_)),p}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee(h,p,_,L,F,n){if(!_){var a=V(p,L,F);L!==a&&(_=!0,F="buffer",L=a)}var x=p.objectMode?1:L.length;p.length+=x;var E=p.length<p.highWaterMark;if(E||(p.needDrain=!0),p.writing||p.corked){var I=p.lastBufferedRequest;p.lastBufferedRequest={chunk:L,encoding:F,isBuf:_,callback:n,next:null},I?I.next=p.lastBufferedRequest:p.bufferedRequest=p.lastBufferedRequest,p.bufferedRequestCount+=1}else $(h,p,!1,x,L,F,n);return E}function $(h,p,_,L,F,n,a){p.writelen=L,p.writecb=a,p.writing=!0,p.sync=!0,p.destroyed?p.onwrite(new w("write")):_?h._writev(F,p.onwrite):h._write(F,n,p.onwrite),p.sync=!1}function te(h,p,_,L,F){--p.pendingcb,_?(process.nextTick(F,L),process.nextTick(q,h,p),h._writableState.errorEmitted=!0,y(h,L)):(F(L),h._writableState.errorEmitted=!0,y(h,L),q(h,p))}function Y(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function re(h,p){var _=h._writableState,L=_.sync,F=_.writecb;if(typeof F!="function")throw new T;if(Y(_),p)te(h,_,L,p,F);else{var n=Z(_)||h.destroyed;!n&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&W(h,_),L?process.nextTick(U,h,_,n,F):U(h,_,n,F)}}function U(h,p,_,L){_||Q(h,p),p.pendingcb--,L(),q(h,p)}function Q(h,p){p.length===0&&p.needDrain&&(p.needDrain=!1,h.emit("drain"))}function W(h,p){p.bufferProcessing=!0;var _=p.bufferedRequest;if(h._writev&&_&&_.next){var L=p.bufferedRequestCount,F=new Array(L),n=p.corkedRequestsFree;n.entry=_;for(var a=0,x=!0;_;)F[a]=_,_.isBuf||(x=!1),_=_.next,a+=1;F.allBuffers=x,$(h,p,!0,p.length,F,"",n.finish),p.pendingcb++,p.lastBufferedRequest=null,n.next?(p.corkedRequestsFree=n.next,n.next=null):p.corkedRequestsFree=new e(p),p.bufferedRequestCount=0}else{for(;_;){var E=_.chunk,I=_.encoding,N=_.callback,C=p.objectMode?1:E.length;if($(h,p,!1,C,E,I,N),_=_.next,p.bufferedRequestCount--,p.writing)break}_===null&&(p.lastBufferedRequest=null)}p.bufferedRequest=_,p.bufferProcessing=!1}D.prototype._write=function(h,p,_){_(new k("_write()"))},D.prototype._writev=null,D.prototype.end=function(h,p,_){var L=this._writableState;return typeof h=="function"?(_=h,h=null,p=null):typeof p=="function"&&(_=p,p=null),h!=null&&this.write(h,p),L.corked&&(L.corked=1,this.uncork()),L.ending||ne(this,L,_),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function ie(h,p){h._final(function(_){p.pendingcb--,_&&y(h,_),p.prefinished=!0,h.emit("prefinish"),q(h,p)})}function J(h,p){!p.prefinished&&!p.finalCalled&&(typeof h._final=="function"&&!p.destroyed?(p.pendingcb++,p.finalCalled=!0,process.nextTick(ie,h,p)):(p.prefinished=!0,h.emit("prefinish")))}function q(h,p){var _=Z(p);if(_&&(J(h,p),p.pendingcb===0&&(p.finished=!0,h.emit("finish"),p.autoDestroy))){var L=h._readableState;(!L||L.autoDestroy&&L.endEmitted)&&h.destroy()}return _}function ne(h,p,_){p.ending=!0,q(h,p),_&&(p.finished?process.nextTick(_):h.once("finish",_)),p.ended=!0,h.writable=!1}function ae(h,p,_){var L=h.entry;for(h.entry=null;L;){var F=L.callback;p.pendingcb--,F(_),L=L.next}p.corkedRequestsFree.next=h}return Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(p){this._writableState&&(this._writableState.destroyed=p)}}),D.prototype.destroy=f.destroy,D.prototype._undestroy=f.undestroy,D.prototype._destroy=function(h,p){p(h)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e=Object.keys||function(o){var c=[];for(var v in o)c.push(v);return c};_stream_duplex=d;var t=require_stream_readable(),r=require_stream_writable();inherits_browserExports(d,t);for(var i=e(r.prototype),s=0;s<i.length;s++){var l=i[s];d.prototype[l]||(d.prototype[l]=r.prototype[l])}function d(o){if(!(this instanceof d))return new d(o);t.call(this,o),r.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function m(){this._writableState.ended||process.nextTick(f,this)}function f(o){o.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,t){var r=buffer,i=r.Buffer;function s(d,m){for(var f in d)m[f]=d[f]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=l);function l(d,m,f){return i(d,m,f)}l.prototype=Object.create(i.prototype),s(i,l),l.from=function(d,m,f){if(typeof d=="number")throw new TypeError("Argument must not be a number");return i(d,m,f)},l.alloc=function(d,m,f){if(typeof d!="number")throw new TypeError("Argument must be a number");var o=i(d);return m!==void 0?typeof f=="string"?o.fill(m,f):o.fill(m):o.fill(0),o},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return i(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(u){if(!u)return"utf8";for(var g;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(g)return;u=(""+u).toLowerCase(),g=!0}}function i(u){var g=r(u);if(typeof g!="string"&&(e.isEncoding===t||!t(u)))throw new Error("Unknown encoding: "+u);return g||u}string_decoder.StringDecoder=s;function s(u){this.encoding=i(u);var g;switch(this.encoding){case"utf16le":this.text=v,this.end=A,g=4;break;case"utf8":this.fillLast=f,g=4;break;case"base64":this.text=k,this.end=T,g=3;break;default:this.write=B,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(g)}s.prototype.write=function(u){if(u.length===0)return"";var g,b;if(this.lastNeed){if(g=this.fillLast(u),g===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<u.length?g?g+this.text(u,b):this.text(u,b):g||""},s.prototype.end=c,s.prototype.text=o,s.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function l(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function d(u,g,b){var y=g.length-1;if(y<b)return 0;var S=l(g[y]);return S>=0?(S>0&&(u.lastNeed=S-1),S):--y<b||S===-2?0:(S=l(g[y]),S>=0?(S>0&&(u.lastNeed=S-2),S):--y<b||S===-2?0:(S=l(g[y]),S>=0?(S>0&&(S===2?S=0:u.lastNeed=S-3),S):0))}function m(u,g,b){if((g[0]&192)!==128)return u.lastNeed=0,"�";if(u.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return u.lastNeed=1,"�";if(u.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return u.lastNeed=2,"�"}}function f(u){var g=this.lastTotal-this.lastNeed,b=m(this,u);if(b!==void 0)return b;if(this.lastNeed<=u.length)return u.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,g,0,u.length),this.lastNeed-=u.length}function o(u,g){var b=d(this,u,g);if(!this.lastNeed)return u.toString("utf8",g);this.lastTotal=b;var y=u.length-(b-this.lastNeed);return u.copy(this.lastChar,0,y),u.toString("utf8",g,y)}function c(u){var g=u&&u.length?this.write(u):"";return this.lastNeed?g+"�":g}function v(u,g){if((u.length-g)%2===0){var b=u.toString("utf16le",g);if(b){var y=b.charCodeAt(b.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",g,u.length-1)}function A(u){var g=u&&u.length?this.write(u):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,b)}return g}function k(u,g){var b=(u.length-g)%3;return b===0?u.toString("base64",g):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",g,u.length-b))}function T(u){var g=u&&u.length?this.write(u):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function B(u){return u.toString(this.encoding)}function w(u){return u&&u.length?this.write(u):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];e.apply(this,i)}}}function noop$1(){}function isRequest$1(e){return e.setHeader&&typeof e.abort=="function"}function eos$1(e,t,r){if(typeof t=="function")return eos$1(e,null,t);t||(t={}),r=once$1(r||noop$1);var i=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,l=function(){e.writable||m()},d=e._writableState&&e._writableState.finished,m=function(){s=!1,d=!0,i||r.call(e)},f=e._readableState&&e._readableState.endEmitted,o=function(){i=!1,f=!0,s||r.call(e)},c=function(T){r.call(e,T)},v=function(){var T;if(i&&!f)return(!e._readableState||!e._readableState.ended)&&(T=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,T);if(s&&!d)return(!e._writableState||!e._writableState.ended)&&(T=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,T)},A=function(){e.req.on("finish",m)};return isRequest$1(e)?(e.on("complete",m),e.on("abort",v),e.req?A():e.on("request",A)):s&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",o),e.on("finish",m),t.error!==!1&&e.on("error",c),e.on("close",v),function(){e.removeListener("complete",m),e.removeListener("abort",v),e.removeListener("request",A),e.req&&e.req.removeListener("finish",m),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",m),e.removeListener("end",o),e.removeListener("error",c),e.removeListener("close",v)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var e;function t(b,y,S){return y=r(y),y in b?Object.defineProperty(b,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):b[y]=S,b}function r(b){var y=i(b,"string");return typeof y=="symbol"?y:String(y)}function i(b,y){if(typeof b!="object"||b===null)return b;var S=b[Symbol.toPrimitive];if(S!==void 0){var M=S.call(b,y||"default");if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(b)}var s=endOfStream,l=Symbol("lastResolve"),d=Symbol("lastReject"),m=Symbol("error"),f=Symbol("ended"),o=Symbol("lastPromise"),c=Symbol("handlePromise"),v=Symbol("stream");function A(b,y){return{value:b,done:y}}function k(b){var y=b[l];if(y!==null){var S=b[v].read();S!==null&&(b[o]=null,b[l]=null,b[d]=null,y(A(S,!1)))}}function T(b){process.nextTick(k,b)}function B(b,y){return function(S,M){b.then(function(){if(y[f]){S(A(void 0,!0));return}y[c](S,M)},M)}}var w=Object.getPrototypeOf(function(){}),u=Object.setPrototypeOf((e={get stream(){return this[v]},next:function(){var y=this,S=this[m];if(S!==null)return Promise.reject(S);if(this[f])return Promise.resolve(A(void 0,!0));if(this[v].destroyed)return new Promise(function(O,j){process.nextTick(function(){y[m]?j(y[m]):O(A(void 0,!0))})});var M=this[o],P;if(M)P=new Promise(B(M,this));else{var D=this[v].read();if(D!==null)return Promise.resolve(A(D,!1));P=new Promise(this[c])}return this[o]=P,P}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var y=this;return new Promise(function(S,M){y[v].destroy(null,function(P){if(P){M(P);return}S(A(void 0,!0))})})}),e),w),g=function(y){var S,M=Object.create(u,(S={},t(S,v,{value:y,writable:!0}),t(S,l,{value:null,writable:!0}),t(S,d,{value:null,writable:!0}),t(S,m,{value:null,writable:!0}),t(S,f,{value:y._readableState.endEmitted,writable:!0}),t(S,c,{value:function(D,O){var j=M[v].read();j?(M[o]=null,M[l]=null,M[d]=null,D(A(j,!1))):(M[l]=D,M[d]=O)},writable:!0}),S));return M[o]=null,s(y,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var D=M[d];D!==null&&(M[o]=null,M[l]=null,M[d]=null,D(P)),M[m]=P;return}var O=M[l];O!==null&&(M[o]=null,M[l]=null,M[d]=null,O(A(void 0,!0))),M[f]=!0}),y.on("readable",T.bind(null,M)),M};return async_iterator=g,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=O;var e;O.ReadableState=D,eventsExports.EventEmitter;var t=function(a,x){return a.listeners(x).length},r=streamBrowser,i=buffer.Buffer,s=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(n){return i.from(n)}function d(n){return i.isBuffer(n)||n instanceof s}var m=require$$3,f;m&&m.debuglog?f=m.debuglog("stream"):f=function(){};var o=requireBuffer_list(),c=destroy_1,v=state,A=v.getHighWaterMark,k=errorsBrowser.codes,T=k.ERR_INVALID_ARG_TYPE,B=k.ERR_STREAM_PUSH_AFTER_EOF,w=k.ERR_METHOD_NOT_IMPLEMENTED,u=k.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,g,b,y;inherits_browserExports(O,r);var S=c.errorOrDestroy,M=["error","close","destroy","pause","resume"];function P(n,a,x){if(typeof n.prependListener=="function")return n.prependListener(a,x);!n._events||!n._events[a]?n.on(a,x):Array.isArray(n._events[a])?n._events[a].unshift(x):n._events[a]=[x,n._events[a]]}function D(n,a,x){e=e||require_stream_duplex(),n=n||{},typeof x!="boolean"&&(x=a instanceof e),this.objectMode=!!n.objectMode,x&&(this.objectMode=this.objectMode||!!n.readableObjectMode),this.highWaterMark=A(this,n,"readableHighWaterMark",x),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=n.emitClose!==!1,this.autoDestroy=!!n.autoDestroy,this.destroyed=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(g||(g=requireString_decoder().StringDecoder),this.decoder=new g(n.encoding),this.encoding=n.encoding)}function O(n){if(e=e||require_stream_duplex(),!(this instanceof O))return new O(n);var a=this instanceof e;this._readableState=new D(n,this,a),this.readable=!0,n&&(typeof n.read=="function"&&(this._read=n.read),typeof n.destroy=="function"&&(this._destroy=n.destroy)),r.call(this)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),O.prototype.destroy=c.destroy,O.prototype._undestroy=c.undestroy,O.prototype._destroy=function(n,a){a(n)},O.prototype.push=function(n,a){var x=this._readableState,E;return x.objectMode?E=!0:typeof n=="string"&&(a=a||x.defaultEncoding,a!==x.encoding&&(n=i.from(n,a),a=""),E=!0),j(this,n,a,!1,E)},O.prototype.unshift=function(n){return j(this,n,null,!0,!1)};function j(n,a,x,E,I){f("readableAddChunk",a);var N=n._readableState;if(a===null)N.reading=!1,re(n,N);else{var C;if(I||(C=ee(N,a)),C)S(n,C);else if(N.objectMode||a&&a.length>0)if(typeof a!="string"&&!N.objectMode&&Object.getPrototypeOf(a)!==i.prototype&&(a=l(a)),E)N.endEmitted?S(n,new u):V(n,N,a,!0);else if(N.ended)S(n,new B);else{if(N.destroyed)return!1;N.reading=!1,N.decoder&&!x?(a=N.decoder.write(a),N.objectMode||a.length!==0?V(n,N,a,!1):W(n,N)):V(n,N,a,!1)}else E||(N.reading=!1,W(n,N))}return!N.ended&&(N.length<N.highWaterMark||N.length===0)}function V(n,a,x,E){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,n.emit("data",x)):(a.length+=a.objectMode?1:x.length,E?a.buffer.unshift(x):a.buffer.push(x),a.needReadable&&U(n)),W(n,a)}function ee(n,a){var x;return!d(a)&&typeof a!="string"&&a!==void 0&&!n.objectMode&&(x=new T("chunk",["string","Buffer","Uint8Array"],a)),x}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(n){g||(g=requireString_decoder().StringDecoder);var a=new g(n);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var x=this._readableState.buffer.head,E="";x!==null;)E+=a.write(x.data),x=x.next;return this._readableState.buffer.clear(),E!==""&&this._readableState.buffer.push(E),this._readableState.length=E.length,this};var $=1073741824;function te(n){return n>=$?n=$:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function Y(n,a){return n<=0||a.length===0&&a.ended?0:a.objectMode?1:n!==n?a.flowing&&a.length?a.buffer.head.data.length:a.length:(n>a.highWaterMark&&(a.highWaterMark=te(n)),n<=a.length?n:a.ended?a.length:(a.needReadable=!0,0))}O.prototype.read=function(n){f("read",n),n=parseInt(n,10);var a=this._readableState,x=n;if(n!==0&&(a.emittedReadable=!1),n===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return f("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):U(this),null;if(n=Y(n,a),n===0&&a.ended)return a.length===0&&_(this),null;var E=a.needReadable;f("need readable",E),(a.length===0||a.length-n<a.highWaterMark)&&(E=!0,f("length less than watermark",E)),a.ended||a.reading?(E=!1,f("reading or ended",E)):E&&(f("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(n=Y(x,a)));var I;return n>0?I=p(n,a):I=null,I===null?(a.needReadable=a.length<=a.highWaterMark,n=0):(a.length-=n,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),x!==n&&a.ended&&_(this)),I!==null&&this.emit("data",I),I};function re(n,a){if(f("onEofChunk"),!a.ended){if(a.decoder){var x=a.decoder.end();x&&x.length&&(a.buffer.push(x),a.length+=a.objectMode?1:x.length)}a.ended=!0,a.sync?U(n):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,Q(n)))}}function U(n){var a=n._readableState;f("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(f("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick(Q,n))}function Q(n){var a=n._readableState;f("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(n.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(n)}function W(n,a){a.readingMore||(a.readingMore=!0,process.nextTick(Z,n,a))}function Z(n,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var x=a.length;if(f("maybeReadMore read 0"),n.read(0),x===a.length)break}a.readingMore=!1}O.prototype._read=function(n){S(this,new w("_read()"))},O.prototype.pipe=function(n,a){var x=this,E=this._readableState;switch(E.pipesCount){case 0:E.pipes=n;break;case 1:E.pipes=[E.pipes,n];break;default:E.pipes.push(n);break}E.pipesCount+=1,f("pipe count=%d opts=%j",E.pipesCount,a);var I=(!a||a.end!==!1)&&n!==process.stdout&&n!==process.stderr,N=I?z:K;E.endEmitted?process.nextTick(N):x.once("end",N),n.on("unpipe",C);function C(H,G){f("onunpipe"),H===x&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,de())}function z(){f("onend"),n.end()}var X=ie(x);n.on("drain",X);var le=!1;function de(){f("cleanup"),n.removeListener("close",se),n.removeListener("finish",fe),n.removeListener("drain",X),n.removeListener("error",oe),n.removeListener("unpipe",C),x.removeListener("end",z),x.removeListener("end",K),x.removeListener("data",ue),le=!0,E.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&X()}x.on("data",ue);function ue(H){f("ondata");var G=n.write(H);f("dest.write",G),G===!1&&((E.pipesCount===1&&E.pipes===n||E.pipesCount>1&&F(E.pipes,n)!==-1)&&!le&&(f("false write response, pause",E.awaitDrain),E.awaitDrain++),x.pause())}function oe(H){f("onerror",H),K(),n.removeListener("error",oe),t(n,"error")===0&&S(n,H)}P(n,"error",oe);function se(){n.removeListener("finish",fe),K()}n.once("close",se);function fe(){f("onfinish"),n.removeListener("close",se),K()}n.once("finish",fe);function K(){f("unpipe"),x.unpipe(n)}return n.emit("pipe",x),E.flowing||(f("pipe resume"),x.resume()),n};function ie(n){return function(){var x=n._readableState;f("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&t(n,"data")&&(x.flowing=!0,h(n))}}O.prototype.unpipe=function(n){var a=this._readableState,x={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return n&&n!==a.pipes?this:(n||(n=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,n&&n.emit("unpipe",this,x),this);if(!n){var E=a.pipes,I=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var N=0;N<I;N++)E[N].emit("unpipe",this,{hasUnpiped:!1});return this}var C=F(a.pipes,n);return C===-1?this:(a.pipes.splice(C,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),n.emit("unpipe",this,x),this)},O.prototype.on=function(n,a){var x=r.prototype.on.call(this,n,a),E=this._readableState;return n==="data"?(E.readableListening=this.listenerCount("readable")>0,E.flowing!==!1&&this.resume()):n==="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,f("on readable",E.length,E.reading),E.length?U(this):E.reading||process.nextTick(q,this)),x},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(n,a){var x=r.prototype.removeListener.call(this,n,a);return n==="readable"&&process.nextTick(J,this),x},O.prototype.removeAllListeners=function(n){var a=r.prototype.removeAllListeners.apply(this,arguments);return(n==="readable"||n===void 0)&&process.nextTick(J,this),a};function J(n){var a=n._readableState;a.readableListening=n.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:n.listenerCount("data")>0&&n.resume()}function q(n){f("readable nexttick read 0"),n.read(0)}O.prototype.resume=function(){var n=this._readableState;return n.flowing||(f("resume"),n.flowing=!n.readableListening,ne(this,n)),n.paused=!1,this};function ne(n,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(ae,n,a))}function ae(n,a){f("resume",a.reading),a.reading||n.read(0),a.resumeScheduled=!1,n.emit("resume"),h(n),a.flowing&&!a.reading&&n.read(0)}O.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(n){var a=n._readableState;for(f("flow",a.flowing);a.flowing&&n.read()!==null;);}O.prototype.wrap=function(n){var a=this,x=this._readableState,E=!1;n.on("end",function(){if(f("wrapped end"),x.decoder&&!x.ended){var C=x.decoder.end();C&&C.length&&a.push(C)}a.push(null)}),n.on("data",function(C){if(f("wrapped data"),x.decoder&&(C=x.decoder.write(C)),!(x.objectMode&&C==null)&&!(!x.objectMode&&(!C||!C.length))){var z=a.push(C);z||(E=!0,n.pause())}});for(var I in n)this[I]===void 0&&typeof n[I]=="function"&&(this[I]=function(z){return function(){return n[z].apply(n,arguments)}}(I));for(var N=0;N<M.length;N++)n.on(M[N],this.emit.bind(this,M[N]));return this._read=function(C){f("wrapped _read",C),E&&(E=!1,n.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=requireAsync_iterator()),b(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),O._fromList=p,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function p(n,a){if(a.length===0)return null;var x;return a.objectMode?x=a.buffer.shift():!n||n>=a.length?(a.decoder?x=a.buffer.join(""):a.buffer.length===1?x=a.buffer.first():x=a.buffer.concat(a.length),a.buffer.clear()):x=a.buffer.consume(n,a.decoder),x}function _(n){var a=n._readableState;f("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(L,a,n))}function L(n,a){if(f("endReadableNT",n.endEmitted,n.length),!n.endEmitted&&n.length===0&&(n.endEmitted=!0,a.readable=!1,a.emit("end"),n.autoDestroy)){var x=a._writableState;(!x||x.autoDestroy&&x.finished)&&a.destroy()}}typeof Symbol=="function"&&(O.from=function(n,a){return y===void 0&&(y=requireFromBrowser()),y(O,n,a)});function F(n,a){for(var x=0,E=n.length;x<E;x++)if(n[x]===a)return x;return-1}return _stream_readable}var _stream_transform=Transform$1,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$1,Duplex);function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Transform$1(e){if(!(this instanceof Transform$1))return new Transform$1(e);Duplex.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function prefinish(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){done(e,t,r)}):done(this,null,null)}Transform$1.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform$1.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$1.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var s=this._readableState;(i.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};Transform$1.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Transform$1.prototype._destroy=function(e,t){Duplex.prototype._destroy.call(this,e,function(r){t(r)})};function done(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return e.push(null)}var _stream_passthrough=PassThrough,Transform=_stream_transform;inherits_browserExports(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,r){r(null,e)};var eos;function once(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&typeof e.abort=="function"}function destroyer(e,t,r,i){i=once(i);var s=!1;e.on("close",function(){s=!0}),eos===void 0&&(eos=endOfStream),eos(e,{readable:t,writable:r},function(d){if(d)return i(d);s=!0,i()});var l=!1;return function(d){if(!s&&!l){if(l=!0,isRequest(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(d||new ERR_STREAM_DESTROYED("pipe"))}}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){return!e.length||typeof e[e.length-1]!="function"?noop:e.pop()}function pipeline(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=popCallback(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS("streams");var s,l=t.map(function(d,m){var f=m<t.length-1,o=m>0;return destroyer(d,f,o,function(c){s||(s=c),c&&l.forEach(call),!f&&(l.forEach(call),i(s))})});return t.reduce(pipe)}var pipeline_1=pipeline;(function(e,t){t=e.exports=require_stream_readable(),t.Stream=t,t.Readable=t,t.Writable=require_stream_writable(),t.Duplex=require_stream_duplex(),t.Transform=_stream_transform,t.PassThrough=_stream_passthrough,t.finished=endOfStream,t.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports;Object.defineProperty(lib$2,"__esModule",{value:!0});lib$2.ReadableWebToNodeStream=void 0;const readable_stream_1=readableBrowserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(t){super(),this.bytesRead=0,this.released=!1,this.reader=t.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const t=await this.pendingRead;delete this.pendingRead,t.done||this.released?this.push(null):(this.bytesRead+=t.value.length,this.push(t.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib$2.ReadableWebToNodeStream=ReadableWebToNodeStream;var lib$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const t=ieee754;function r(f){return new DataView(f.buffer,f.byteOffset)}e.UINT8={len:1,get(f,o){return r(f).getUint8(o)},put(f,o,c){return r(f).setUint8(o,c),o+1}},e.UINT16_LE={len:2,get(f,o){return r(f).getUint16(o,!0)},put(f,o,c){return r(f).setUint16(o,c,!0),o+2}},e.UINT16_BE={len:2,get(f,o){return r(f).getUint16(o)},put(f,o,c){return r(f).setUint16(o,c),o+2}},e.UINT24_LE={len:3,get(f,o){const c=r(f);return c.getUint8(o)+(c.getUint16(o+1,!0)<<8)},put(f,o,c){const v=r(f);return v.setUint8(o,c&255),v.setUint16(o+1,c>>8,!0),o+3}},e.UINT24_BE={len:3,get(f,o){const c=r(f);return(c.getUint16(o)<<8)+c.getUint8(o+2)},put(f,o,c){const v=r(f);return v.setUint16(o,c>>8),v.setUint8(o+2,c&255),o+3}},e.UINT32_LE={len:4,get(f,o){return r(f).getUint32(o,!0)},put(f,o,c){return r(f).setUint32(o,c,!0),o+4}},e.UINT32_BE={len:4,get(f,o){return r(f).getUint32(o)},put(f,o,c){return r(f).setUint32(o,c),o+4}},e.INT8={len:1,get(f,o){return r(f).getInt8(o)},put(f,o,c){return r(f).setInt8(o,c),o+1}},e.INT16_BE={len:2,get(f,o){return r(f).getInt16(o)},put(f,o,c){return r(f).setInt16(o,c),o+2}},e.INT16_LE={len:2,get(f,o){return r(f).getInt16(o,!0)},put(f,o,c){return r(f).setInt16(o,c,!0),o+2}},e.INT24_LE={len:3,get(f,o){const c=e.UINT24_LE.get(f,o);return c>8388607?c-16777216:c},put(f,o,c){const v=r(f);return v.setUint8(o,c&255),v.setUint16(o+1,c>>8,!0),o+3}},e.INT24_BE={len:3,get(f,o){const c=e.UINT24_BE.get(f,o);return c>8388607?c-16777216:c},put(f,o,c){const v=r(f);return v.setUint16(o,c>>8),v.setUint8(o+2,c&255),o+3}},e.INT32_BE={len:4,get(f,o){return r(f).getInt32(o)},put(f,o,c){return r(f).setInt32(o,c),o+4}},e.INT32_LE={len:4,get(f,o){return r(f).getInt32(o,!0)},put(f,o,c){return r(f).setInt32(o,c,!0),o+4}},e.UINT64_LE={len:8,get(f,o){return r(f).getBigUint64(o,!0)},put(f,o,c){return r(f).setBigUint64(o,c,!0),o+8}},e.INT64_LE={len:8,get(f,o){return r(f).getBigInt64(o,!0)},put(f,o,c){return r(f).setBigInt64(o,c,!0),o+8}},e.UINT64_BE={len:8,get(f,o){return r(f).getBigUint64(o)},put(f,o,c){return r(f).setBigUint64(o,c),o+8}},e.INT64_BE={len:8,get(f,o){return r(f).getBigInt64(o)},put(f,o,c){return r(f).setBigInt64(o,c),o+8}},e.Float16_BE={len:2,get(f,o){return t.read(f,o,!1,10,this.len)},put(f,o,c){return t.write(f,c,o,!1,10,this.len),o+this.len}},e.Float16_LE={len:2,get(f,o){return t.read(f,o,!0,10,this.len)},put(f,o,c){return t.write(f,c,o,!0,10,this.len),o+this.len}},e.Float32_BE={len:4,get(f,o){return r(f).getFloat32(o)},put(f,o,c){return r(f).setFloat32(o,c),o+4}},e.Float32_LE={len:4,get(f,o){return r(f).getFloat32(o,!0)},put(f,o,c){return r(f).setFloat32(o,c,!0),o+4}},e.Float64_BE={len:8,get(f,o){return r(f).getFloat64(o)},put(f,o,c){return r(f).setFloat64(o,c),o+8}},e.Float64_LE={len:8,get(f,o){return r(f).getFloat64(o,!0)},put(f,o,c){return r(f).setFloat64(o,c,!0),o+8}},e.Float80_BE={len:10,get(f,o){return t.read(f,o,!1,63,this.len)},put(f,o,c){return t.write(f,c,o,!1,63,this.len),o+this.len}},e.Float80_LE={len:10,get(f,o){return t.read(f,o,!0,63,this.len)},put(f,o,c){return t.write(f,c,o,!0,63,this.len),o+this.len}};class i{constructor(o){this.len=o}get(o,c){}}e.IgnoreType=i;class s{constructor(o){this.len=o}get(o,c){return o.subarray(c,c+this.len)}}e.Uint8ArrayType=s;class l{constructor(o){this.len=o}get(o,c){return Buffer.from(o.subarray(c,c+this.len))}}e.BufferType=l;class d{constructor(o,c){this.len=o,this.encoding=c}get(o,c){return Buffer.from(o).toString(this.encoding,c,c+this.len)}}e.StringType=d;class m{constructor(o){this.len=o}static decode(o,c,v){let A="";for(let k=c;k<v;++k)A+=m.codePointToString(m.singleByteDecoder(o[k]));return A}static inRange(o,c,v){return c<=o&&o<=v}static codePointToString(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}static singleByteDecoder(o){if(m.inRange(o,0,127))return o;const c=m.windows1252[o-128];if(c===null)throw Error("invaliding encoding");return c}get(o,c=0){return m.decode(o,c,c+this.len)}}e.AnsiStringType=m,m.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib={},EndOfFileStream={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class t extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=t})(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((t,r)=>{this.reject=r,this.resolve=t})}}Deferred$1.Deferred=Deferred;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const t=EndOfFileStream,r=Deferred$1;var i=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});const s=1*1024*1024;class l{constructor(m){if(this.s=m,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!m.read||!m.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new t.EndOfStreamError)),this.s.once("error",f=>this.reject(f)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(m,f,o){const c=await this.read(m,f,o);return this.peekQueue.push(m.subarray(f,f+c)),c}async read(m,f,o){if(o===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new t.EndOfStreamError;let c=o,v=0;for(;this.peekQueue.length>0&&c>0;){const A=this.peekQueue.pop();if(!A)throw new Error("peekData should be defined");const k=Math.min(A.length,c);m.set(A.subarray(0,k),f+v),v+=k,c-=k,k<A.length&&this.peekQueue.push(A.subarray(k))}for(;c>0&&!this.endOfStream;){const A=Math.min(c,s),k=await this.readFromStream(m,f+v,A);if(v+=k,k<A)break;c-=k}return v}async readFromStream(m,f,o){const c=this.s.read(o);if(c)return m.set(c,f),c.length;{const v={buffer:m,offset:f,length:o,deferred:new r.Deferred};return this.deferred=v.deferred,this.s.once("readable",()=>{this.readDeferred(v)}),v.deferred.promise}}readDeferred(m){const f=this.s.read(m.length);f?(m.buffer.set(f,m.offset),m.deferred.resolve(f.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(m)})}reject(m){this.endOfStream=!0,this.deferred&&(this.deferred.reject(m),this.deferred=null)}}e.StreamReader=l})(StreamReader);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var t=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}});var r=StreamReader;Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return r.StreamReader}})})(lib);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib;class AbstractTokenizer{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t||{}}async readToken(t,r=this.position){const i=Buffer.alloc(t.len);if(await this.readBuffer(i,{position:r})<t.len)throw new peek_readable_1$2.EndOfStreamError;return t.get(i,0)}async peekToken(t,r=this.position){const i=Buffer.alloc(t.len);if(await this.peekBuffer(i,{position:r})<t.len)throw new peek_readable_1$2.EndOfStreamError;return t.get(i,0)}async readNumber(t){if(await this.readBuffer(this.numBuffer,{length:t.len})<t.len)throw new peek_readable_1$2.EndOfStreamError;return t.get(this.numBuffer,0)}async peekNumber(t){if(await this.peekBuffer(this.numBuffer,{length:t.len})<t.len)throw new peek_readable_1$2.EndOfStreamError;return t.get(this.numBuffer,0)}async ignore(t){if(this.fileInfo.size!==void 0){const r=this.fileInfo.size-this.position;if(t>r)return this.position+=r,r}return this.position+=t,t}async close(){}normalizeOptions(t,r){if(r&&r.position!==void 0&&r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return r?{mayBeLess:r.mayBeLess===!0,offset:r.offset?r.offset:0,length:r.length?r.length:t.length-(r.offset?r.offset:0),position:r.position?r.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(t,r){super(r),this.streamReader=new peek_readable_1$1.StreamReader(t)}async getFileInfo(){return this.fileInfo}async readBuffer(t,r){const i=this.normalizeOptions(t,r),s=i.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(t,r);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(i.length===0)return 0;const l=await this.streamReader.read(t,i.offset,i.length);if(this.position+=l,(!r||!r.mayBeLess)&&l<i.length)throw new peek_readable_1$1.EndOfStreamError;return l}async peekBuffer(t,r){const i=this.normalizeOptions(t,r);let s=0;if(i.position){const l=i.position-this.position;if(l>0){const d=new Uint8Array(i.length+l);return s=await this.peekBuffer(d,{mayBeLess:i.mayBeLess}),t.set(d.subarray(l),i.offset),s-l}else if(l<0)throw new Error("Cannot peek from a negative offset in a stream")}if(i.length>0){try{s=await this.streamReader.peek(t,i.offset,i.length)}catch(l){if(r&&r.mayBeLess&&l instanceof peek_readable_1$1.EndOfStreamError)return 0;throw l}if(!i.mayBeLess&&s<i.length)throw new peek_readable_1$1.EndOfStreamError}return s}async ignore(t){const r=Math.min(maxBufferSize,t),i=new Uint8Array(r);let s=0;for(;s<t;){const l=t-s,d=await this.readBuffer(i,{length:Math.min(r,l)});if(d<0)return d;s+=d}return s}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(t,r){super(r),this.uint8Array=t,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:t.length}async readBuffer(t,r){if(r&&r.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=r.position}const i=await this.peekBuffer(t,r);return this.position+=i,i}async peekBuffer(t,r){const i=this.normalizeOptions(t,r),s=Math.min(this.uint8Array.length-i.position,i.length);if(!i.mayBeLess&&s<i.length)throw new peek_readable_1.EndOfStreamError;return t.set(this.uint8Array.subarray(i.position,i.position+s),i.offset),s}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const t=ReadStreamTokenizer$1,r=BufferTokenizer$1;var i=lib;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});function s(d,m){return m=m||{},new t.ReadStreamTokenizer(d,m)}e.fromStream=s;function l(d,m){return new r.BufferTokenizer(d,m)}e.fromBuffer=l})(core$1);var util={};util.stringToBytes=e=>[...e].map(t=>t.charCodeAt(0));util.tarHeaderChecksumMatches=(e,t=0)=>{const r=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(r))return!1;let i=8*32;for(let s=t;s<t+148;s++)i+=e[s];for(let s=t+156;s<t+512;s++)i+=e[s];return r===i};util.uint32SyncSafeToken={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$1,strtok3=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(e){const t=await strtok3.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;const r=strtok3.fromBuffer(t);return fromTokenizer(r)}function _check(e,t,r){r={offset:0,...r};for(const[i,s]of t.entries())if(r.mask){if(s!==(r.mask[i]&e[i+r.offset]))return!1}else if(s!==e[i+r.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const r=12,i=(l,d)=>_check(t,l,d),s=(l,d)=>i(stringToBytes(l),d);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:r,mayBeLess:!0}),i([66,77]))return{ext:"bmp",mime:"image/bmp"};if(i([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(i([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(i([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(i([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),s("PS-Adobe-",{offset:2})&&s(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(i([31,160])||i([31,157]))return{ext:"Z",mime:"application/x-compress"};if(i([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(i([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(i([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(i([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(s("ID3")){await e.ignore(6);const l=await e.readToken(uint32SyncSafeToken);return e.position+l>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(l),fromTokenizer(e))}if(s("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&i([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(i([71,73,70]))return{ext:"gif",mime:"image/gif"};if(s("FLIF"))return{ext:"flif",mime:"image/flif"};if(s("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(s("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(s("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(s("FORM"))return{ext:"aif",mime:"audio/aiff"};if(s("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(i([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const l={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(l.filename=await e.readToken(new Token.StringType(l.filenameLength,"utf-8")),await e.ignore(l.extraFieldLength),l.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(l.filename.endsWith(".rels")||l.filename.endsWith(".xml"))switch(l.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(l.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(l.filename.startsWith("3D/")&&l.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(l.filename==="mimetype"&&l.compressedSize===l.uncompressedSize)switch(await e.readToken(new Token.StringType(l.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(l.compressedSize===0){let d=-1;for(;d<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),d=t.indexOf("504B0304",0,"hex"),await e.ignore(d>=0?d:t.length)}else await e.ignore(l.compressedSize)}}catch(l){if(!(l instanceof strtok3.EndOfStreamError))throw l}return{ext:"zip",mime:"application/zip"}}if(s("OggS")){await e.ignore(28);const l=Buffer.alloc(8);return await e.readBuffer(l),_check(l,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(l,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(l,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(l,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(l,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(l,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(i([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(s("ftyp",{offset:4})&&t[8]&96){const l=t.toString("binary",8,12).replace("\0"," ").trim();switch(l){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return l.startsWith("3g")?l.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(s("MThd"))return{ext:"mid",mime:"audio/midi"};if(s("wOFF")&&(i([0,1,0,0],{offset:4})||s("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(s("wOF2")&&(i([0,1,0,0],{offset:4})||s("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(i([212,195,178,161])||i([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(s("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(s("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(s("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(i([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(s("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(s("%PDF")){await e.ignore(1350);const l=10*1024*1024,d=Buffer.alloc(Math.min(l,e.fileInfo.size));return await e.readBuffer(d,{mayBeLess:!0}),d.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(i([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(i([73,73,42,0]))return s("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:i([28,0,254,0],{offset:8})||i([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:i([8,0,0,0],{offset:4})&&(i([45,0,254,0],{offset:8})||i([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(i([16,251,134,1],{offset:4})||i([8,0,0,0],{offset:4}))&&i([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(i([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(s("MAC "))return{ext:"ape",mime:"audio/ape"};if(i([26,69,223,163])){async function l(){const c=await e.peekNumber(Token.UINT8);let v=128,A=0;for(;!(c&v)&&v!==0;)++A,v>>=1;const k=Buffer.alloc(A+1);return await e.readBuffer(k),k}async function d(){const c=await l(),v=await l();v[0]^=128>>v.length-1;const A=Math.min(6,v.length);return{id:c.readUIntBE(0,c.length),len:v.readUIntBE(v.length-A,A)}}async function m(c,v){for(;v>0;){const A=await d();if(A.id===17026)return e.readToken(new Token.StringType(A.len,"utf-8"));await e.ignore(A.len),--v}}const f=await d();switch(await m(1,f.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(i([82,73,70,70])){if(i([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(i([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(i([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(s("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(i([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(s("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(s("MSCF")||s("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(i([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(i([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(i([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(i([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(s("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(s("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(i([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(s("IMPM"))return{ext:"it",mime:"audio/x-it"};if(s("-lh0-",{offset:2})||s("-lh1-",{offset:2})||s("-lh2-",{offset:2})||s("-lh3-",{offset:2})||s("-lh4-",{offset:2})||s("-lh5-",{offset:2})||s("-lh6-",{offset:2})||s("-lh7-",{offset:2})||s("-lzs-",{offset:2})||s("-lz4-",{offset:2})||s("-lz5-",{offset:2})||s("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(i([0,0,1,186])){if(i([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(i([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(s("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(i([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(s("<?xml "))return{ext:"xml",mime:"application/xml"};if(i([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(i([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(s("solid "))return{ext:"stl",mime:"model/stl"};if(s("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(s("!<arch>"))return await e.ignore(8),await e.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(i([137,80,78,71,13,10,26,10])){await e.ignore(8);async function l(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}do{const d=await l();if(d.length<0)return;switch(d.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(d.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(i([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(i([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(i([102,114,101,101],{offset:4})||i([109,100,97,116],{offset:4})||i([109,111,111,118],{offset:4})||i([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(i([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(s("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(i([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(i([48,38,178,117,142,102,207,17,166,217])){async function l(){const d=Buffer.alloc(16);return await e.readBuffer(d),{id:d,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const d=await l();let m=d.size-24;if(_check(d.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const f=Buffer.alloc(16);if(m-=await e.readBuffer(f),_check(f,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(f,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(m)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(i([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((i([126,16,4])||i([126,24,4]))&&i([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(i([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(i([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(i([255,10])||i([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(i([0,0,1,186])||i([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(i([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(i([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(i([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(i([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),s("BEGIN:")){if(s("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(s("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(s("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(s("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(s("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(i([4,0,0,0])&&t.length>=16){const l=t.readUInt32LE(12);if(l>12&&t.length>=l+16)try{const d=t.slice(16,l+16).toString();if(JSON.parse(d).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(i([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(s("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(i([71],{offset:4})&&(i([71],{offset:192})||i([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(i([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(i([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(i([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(i([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(i([76,80],{offset:34})&&(i([0,0,1],{offset:8})||i([1,0,2],{offset:8})||i([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(i([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(i([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(s("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&i([255,224],{offset:0,mask:[255,224]})){if(i([16],{offset:1,mask:[22]}))return i([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(i([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(i([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(i([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let t;stream.pipeline?t=stream.pipeline(readableStream,e,()=>{}):t=readableStream.pipe(e);const r=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const i=await fromBuffer(r);e.fileType=i}catch(i){reject(i)}resolve(t)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType;(function(e){const{ReadableWebToNodeStream:t}=lib$2,r=core;async function i(d){const m=new t(d),f=await r.fromStream(m);return await m.close(),f}async function s(d){const m=await l(d);return r.fromBuffer(Buffer.from(m))}function l(d){return d.arrayBuffer?d.arrayBuffer():new Promise((m,f)=>{const o=new FileReader;o.addEventListener("loadend",c=>{m(c.target.result)}),o.addEventListener("error",c=>{f(new Error(c.message))}),o.addEventListener("abort",c=>{f(new Error(c.type))}),o.readAsArrayBuffer(d)})}Object.assign(e.exports,r,{fromStream:i,fromBlob:s})})(browser$3);var browserExports=browser$3.exports;const browser=getDefaultExportFromCjs(browserExports),browser$1=_mergeNamespaces({__proto__:null,default:browser},[browserExports]);export{browser$1 as b};
